<!-- <nav class="navbar navbar-default">
	<p class="navbar-text">
		<span class="glyphicon glyphicon-search"></span> Search
	</p>
</nav> -->
<div class="panel panel-default">
	<div class="panel-heading">Search Query Form</div>
	<div class="panel-body">
		<form [formGroup]="searchForm" class="form-horizontal">
			<ng-template ngFor let-key [ngForOf]="searchManager.inUse" let-i="index">
				<div [ngSwitch]="key" class="form-group form-group-md">
					<ng-template [ngSwitchCase]="searchManager.companyNameKey">
						<label class="col-md-3 control-label" for="{{searchManager.companyNameKey}}_{{i}}">company name contains</label>
						<div class="col-md-8">
							<input id="{{searchManager.companyNameKey}}_{{i}}" formControlName="{{searchManager.companyNameKey}}_{{i}}"
							 type="text" class="form-control" />
						</div>
						<div class="col-md-1">
							<button type="button" class="btn btn-default">
								<span class="glyphicon glyphicon-remove"></span>
							</button>
						</div>
					</ng-template>
					<ng-template [ngSwitchCase]="searchManager.contactNameKey">
						<label class="col-md-3 control-label" for="{{searchManager.contactNameKey}}_{{i}}">has contact name contains</label>
						<div class="col-md-8">
							<input id="{{searchManager.contactNameKey}}_{{i}}" formControlName="{{searchManager.contactNameKey}}_{{i}}"
							 type="text" class="form-control" />
						</div>
						<div class="col-md-1">
							<button type="button" class="btn btn-default">
								<span class="glyphicon glyphicon-remove"></span>
							</button>
						</div>
					</ng-template>
					<ng-template [ngSwitchCase]="searchManager.participateKey">
						<label for="{{searchManager.participateKey}}_{{i}}" class="col-md-3 control-label">participating in</label>
						<div class="col-md-8">
							<select id="{{searchManager.participateKey}}_{{i}}" formControlName="{{searchManager.participateKey}}_{{i}}"
							 class="form-control">
								<option value="">any event</option>
								<option *ngFor="let item of allEvents | async" [value]="item._id">{{item.name}}</option>
							</select>
						</div>
					</ng-template>
				</div>
			</ng-template>
			<button type="button" class="btn btn-info" (click)="onSubmit(false)">
				<span class="glyphicon glyphicon-search"></span> FIND COMPANIES
			</button>
			<button type="button" class="btn btn-info" (click)="onSubmit(true)">
				<span class="glyphicon glyphicon-search"></span> FIND CONTACTS
			</button>
		</form>
	</div>
</div>
<table *ngIf="companies && companies.length > 0" class="table table-hover table-condensed">
	<thead>
		<tr>
			<th>company name</th>
			<th>location</th>
			<th># of activities</th>
			<th># of contacts</th>
		</tr>
	</thead>
	<tbody>
		<tr *ngFor="let company of companies">
			<td>
				{{company.name}}
				<sup *ngIf="company.isNew">
					<mark>new</mark>
				</sup>
			</td>
			<td scope="row">{{company.country}} {{company.city ? '(' + company.city + ')' : ''}}</td>
			<td scope="row">{{company.activitiesNum}}</td>
			<td scope="row">{{company.contactsNum}}</td>
		</tr>
	</tbody>
</table>
<table *ngIf="contacts && contacts.length > 0" class="table table-hover table-condensed">
	<thead>
		<tr>
			<th>contact name</th>
			<th>job title</th>
			<th>company name</th>
			<th>country</th>
		</tr>
	</thead>
	<tbody>
		<tr *ngFor="let contact of contacts">
			<td>
				{{contact.name}}
				<sup *ngIf="contact.isNew">
					<mark>new</mark>
				</sup>
				<sup *ngIf="!contact.active">fired!</sup>
			</td>
			<td>{{contact.jobTitle}}</td>
			<td>{{contact.companyName}}</td>
			<td>{{contact.country}}</td>
		</tr>
	</tbody>
</table>
